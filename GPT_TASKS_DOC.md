# Idle Chronicle - Task System Documentation

## –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ –∑–∞–¥–∞—á —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ **Daily Tasks** (–µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π), –∫–æ—Ç–æ—Ä—ã–µ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –≤ –ø–æ–ª–Ω–æ—á—å –ø–æ –ª–æ–∫–∞–ª—å–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

---

## –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `src/lib/tasks.ts` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, –Ω–∞–≥—Ä–∞–¥—ã) |
| `src/lib/taskManager.ts` | –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä (localStorage, —Å–æ–±—ã—Ç–∏—è) |
| `src/components/game/TasksModal.tsx` | UI –º–æ–¥–∞–ª–∫–∞ –∑–∞–¥–∞—á |
| `server.js` ‚Üí `tasks:claim` | –°–µ—Ä–≤–µ—Ä–Ω–∞—è –≤—ã–¥–∞—á–∞ –Ω–∞–≥—Ä–∞–¥ |

---

## –¢–∏–ø—ã –Ω–∞–≥—Ä–∞–¥ (RewardType)

```typescript
type RewardType =
  | 'ether'        // –≠—Ñ–∏—Ä (x2 —É—Ä–æ–Ω –Ω–∞ —É–¥–∞—Ä)
  | 'woodChest'    // –î–µ—Ä–µ–≤—è–Ω–Ω—ã–π —Å—É–Ω–¥—É–∫
  | 'crystals'     // –ü—Ä–µ–º–∏—É–º –≤–∞–ª—é—Ç–∞ (ancientCoin)
  | 'scrollHaste'  // –°–≤–∏—Ç–æ–∫ —É—Å–∫–æ—Ä–µ–Ω–∏—è (+30% –∞—Ç–∞–∫–∞ –Ω–∞ 30 —Å–µ–∫)
  | 'scrollAcumen' // –°–≤–∏—Ç–æ–∫ —Å–∏–ª—ã (+50% —É—Ä–æ–Ω –Ω–∞ 30 —Å–µ–∫)
  | 'scrollLuck'   // –°–≤–∏—Ç–æ–∫ —É–¥–∞—á–∏ (+10% –∫—Ä–∏—Ç –Ω–∞ 60 —Å–µ–∫)
  | 'chestBooster' // –£—Å–∫–æ—Ä–∏—Ç–µ–ª—å —Å—É–Ω–¥—É–∫–æ–≤ (–ª–æ–∫–∞–ª—å–Ω—ã–π –±–∞—Ñ—Ñ)
```

---

## Daily Tasks (–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ)

| ID | –ù–∞–∑–≤–∞–Ω–∏–µ | –£—Å–ª–æ–≤–∏–µ | –ù–∞–≥—Ä–∞–¥–∞ |
|----|----------|---------|---------|
| `dailyLogin` | –õ–æ–≥–∏–Ω | –ó–∞–π—Ç–∏ –≤ –∏–≥—Ä—É | 5 crystals |
| `clicker` | –ö–ª–∏–∫–µ—Ä | 50 —Ç–∞–ø–æ–≤ | 50 ether |
| `meatgrinder` | –ú—è—Å–æ—Ä—É–±–∫–∞ | 10,000 —É—Ä–æ–Ω–∞ | 1 Wooden Chest |
| `dailyDamage` | –î–Ω–µ–≤–Ω–æ–π —É—Ä–æ–Ω | 100,000 —É—Ä–æ–Ω–∞ | 100 ether |
| `chestHunter` | –û—Ö–æ—Ç–Ω–∏–∫ –∑–∞ —Å—É–Ω–¥—É–∫–∞–º–∏ | 3 —Å—É–Ω–¥—É–∫–∞ | Haste + Acumen + Luck —Å–≤–∏—Ç–∫–∏ |
| `caster` | –ö–∞—Å—Ç–µ—Ä | 30 —Å–∫–∏–ª–ª–æ–≤ | 200 ether |
| `chestBoost` | –£—Å–∫–æ—Ä–∏—Ç–µ–ª—å | 1 —Å—É–Ω–¥—É–∫ | x1.5 —Å–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–∫—Ä—ã—Ç–∏—è –Ω–∞ 30 –º–∏–Ω |

---

## –£—Å–ª–æ–≤–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (condition.type)

| –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|-----|----------|--------|
| `login` | –í—Ö–æ–¥ –≤ –∏–≥—Ä—É | target: 1 |
| `taps` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞–ø–æ–≤ | target: 50 |
| `damage` | –°—É–º–º–∞—Ä–Ω—ã–π —É—Ä–æ–Ω | target: 10000 |
| `chestsOpened` | –û—Ç–∫—Ä—ã—Ç–æ —Å—É–Ω–¥—É–∫–æ–≤ | target: 3 |
| `skillCasts` | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π —Å–∫–∏–ª–ª–æ–≤ | target: 30 |
| `trial` | DPS-—á–µ–∫ –∑–∞ —Å–µ—Å—Å–∏—é | target: 10000 (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è) |

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–ª–∏–µ–Ω—Ç (TaskManager)
- –•—Ä–∞–Ω–∏—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ `localStorage` (–∫–ª—é—á: `ic_task_state_v1`)
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è: `recordTap()`, `recordDamage()`, `recordSkillCast()`, `recordChestOpened()`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ–±—ã—Ç–∏–∏
- –ü—Ä–∏ —Ä–µ—Å–µ—Ç–µ –¥–Ω—è (–ø–æ–ª–Ω–æ—á—å) —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –≤—Å–µ daily –∑–∞–¥–∞—á–∏

### –°–µ—Ä–≤–µ—Ä (tasks:claim)
- –ü–æ–ª—É—á–∞–µ—Ç `{ taskId, rewards }` –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –Ω–∞–≥—Ä–∞–¥–∞ –Ω–µ –±—ã–ª–∞ –≤—ã–¥–∞–Ω–∞ (–∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π)
- –í—ã–¥–∞—ë—Ç –Ω–∞–≥—Ä–∞–¥—ã:
  - `ether` ‚Üí user.ether += amount
  - `crystals` ‚Üí user.ancientCoin += amount
  - `woodChest` ‚Üí —Å–æ–∑–¥–∞—ë—Ç Chest –≤ –ë–î
  - `scrollHaste/Acumen/Luck` ‚Üí user.potionHaste/Acumen/Luck += 1

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ TaskDefinition

```typescript
interface TaskDefinition {
  id: string;           // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
  type: 'daily';        // –¢–∏–ø (—Ç–æ–ª—å–∫–æ daily —Å–µ–π—á–∞—Å)
  nameRu: string;       // –ù–∞–∑–≤–∞–Ω–∏–µ RU
  nameEn: string;       // –ù–∞–∑–≤–∞–Ω–∏–µ EN
  descRu: string;       // –û–ø–∏—Å–∞–Ω–∏–µ RU
  descEn: string;       // –û–ø–∏—Å–∞–Ω–∏–µ EN
  icon: string;         // –≠–º–æ–¥–∑–∏
  condition: {
    type: 'taps' | 'damage' | 'chestsOpened' | 'skillCasts' | 'login';
    target: number;     // –¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
  };
  rewards: TaskReward[]; // –ú–∞—Å—Å–∏–≤ –Ω–∞–≥—Ä–∞–¥
}
```

---

## –ü—Ä–∏–º–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏

```typescript
// –í src/lib/tasks.ts ‚Üí DAILY_TASKS
{
  id: 'bossSlayer',
  type: 'daily',
  nameRu: '–£–±–∏–π—Ü–∞ –±–æ—Å—Å–æ–≤',
  nameEn: 'Boss Slayer',
  descRu: '–ù–∞–Ω–µ—Å–∏ 1,000,000 —É—Ä–æ–Ω–∞',
  descEn: 'Deal 1,000,000 damage',
  icon: 'üëπ',
  condition: { type: 'damage', target: 1000000 },
  rewards: [
    { type: 'crystals', amount: 20 },
    { type: 'ether', amount: 500 },
  ],
},
```

---

## –í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–ü—Ä–æ–≥—Ä–µ—Å—Å —Ö—Ä–∞–Ω–∏—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ** - –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—á–∏—Å—Ç–∏—Ç localStorage, –ø—Ä–æ–≥—Ä–µ—Å—Å —Å–±—Ä–æ—Å–∏—Ç—Å—è
2. **–ù–∞–≥—Ä–∞–¥—ã –≤—ã–¥–∞—é—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º** - –∑–∞—â–∏—Ç–∞ –æ—Ç —á–∏—Ç–æ–≤ (–∫–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç taskId, —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç)
3. **Daily reset –≤ –ø–æ–ª–Ω–æ—á—å** - –ø–æ –ª–æ–∫–∞–ª—å–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ –∫–ª–∏–µ–Ω—Ç–∞
4. **–°—É–Ω–¥—É–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Å–ª–æ—Ç—ã** - –µ—Å–ª–∏ —Å–ª–æ—Ç—ã –∑–∞–Ω—è—Ç—ã, woodChest –Ω–µ –≤—ã–¥–∞—Å—Ç—Å—è
5. **ChestBooster —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ** - –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

---

## TODO / –ò–¥–µ–∏

- [ ] –°–µ—Ä–≤–µ—Ä–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (–∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö)
- [ ] Weekly tasks (–Ω–µ–¥–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è)
- [ ] Achievement —Å–∏—Å—Ç–µ–º–∞ (–æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è)
- [ ] –ù–∞–≥—Ä–∞–¥–∞ EnchantCharges –∑–∞ –∑–∞–¥–∞—á–∏
