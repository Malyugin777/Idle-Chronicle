=================================================================
IDLE CHRONICLE - –ü–û–õ–ù–û–ï –û–ü–ò–°–ê–ù–ò–ï –ò–ì–†–´ v1.8.19
–î–ê–¢–ê –ê–ù–ê–õ–ò–ó–ê: 2026-01-11
=================================================================

–ñ–ê–ù–†: Idle Clicker MMO-RPG –¥–ª—è Telegram Mini App
–°–ï–¢–¢–ò–ù–ì: –§—ç–Ω—Ç–µ–∑–∏ –≤ —Å—Ç–∏–ª–µ Lineage 2
–ü–õ–ê–¢–§–û–†–ú–ê: Web (Next.js 14 + Phaser 3 + Socket.io + PostgreSQL)
–¢–ï–ö–£–©–ê–Ø –í–ï–†–°–ò–Ø: v1.8.18

=================================================================
–ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê
=================================================================

–°–¢–†–£–ö–¢–£–†–ê –ü–ê–ü–û–ö:
```
Idle Chronicle/
‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îî‚îÄ‚îÄ web/
‚îÇ       ‚îú‚îÄ‚îÄ server.js              # Backend (9292 —Å—Ç—Ä–æ–∫–∏, Node.js + Socket.io)
‚îÇ       ‚îú‚îÄ‚îÄ prisma/schema.prisma   # Database schema (716 —Å—Ç—Ä–æ–∫)
‚îÇ       ‚îú‚îÄ‚îÄ services/StatsService.js
‚îÇ       ‚îî‚îÄ‚îÄ src/
‚îÇ           ‚îú‚îÄ‚îÄ components/
‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ game/
‚îÇ           ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PhaserGame.tsx   # –ì–ª–∞–≤–Ω—ã–π UI (1762 —Å—Ç—Ä–æ–∫–∏)
‚îÇ           ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ constants.ts
‚îÇ           ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types.ts
‚îÇ           ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EnchantModal.tsx (644 —Å—Ç—Ä–æ–∫–∏)
‚îÇ           ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ForgeModal.tsx   (917 —Å—Ç—Ä–æ–∫)
‚îÇ           ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TasksModal.tsx   (857 —Å—Ç—Ä–æ–∫)
‚îÇ           ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui/
‚îÇ           ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ TopHUD.tsx
‚îÇ           ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ SkillBar.tsx
‚îÇ           ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ BuffIcon.tsx
‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ tabs/
‚îÇ           ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CharacterTab.tsx (1826 —Å—Ç—Ä–æ–∫)
‚îÇ           ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TreasuryTab.tsx  (1097 —Å—Ç—Ä–æ–∫)
‚îÇ           ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LeaderboardTab.tsx (482 —Å—Ç—Ä–æ–∫–∏)
‚îÇ           ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ShopTab.tsx      (348 —Å—Ç—Ä–æ–∫)
‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ modals/
‚îÇ           ‚îÇ       ‚îî‚îÄ‚îÄ ChestOpenModal.tsx
‚îÇ           ‚îî‚îÄ‚îÄ lib/
‚îÇ               ‚îú‚îÄ‚îÄ socket.ts        # Socket.io singleton
‚îÇ               ‚îú‚îÄ‚îÄ taskManager.ts   # Daily task tracking
‚îÇ               ‚îî‚îÄ‚îÄ craftingSystem.ts
‚îú‚îÄ‚îÄ packages/
‚îÇ   ‚îî‚îÄ‚îÄ shared/src/
‚îÇ       ‚îú‚îÄ‚îÄ data/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ enchant.ts   # –®–∞–Ω—Å—ã –∑–∞—Ç–æ—á–∫–∏
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ sets.ts      # –°–µ—Ç–æ–≤—ã–µ –±–æ–Ω—É—Å—ã
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ skills.ts    # –°–∫–∏–ª–ª—ã
‚îÇ       ‚îú‚îÄ‚îÄ types/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ models.ts
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ events.ts
‚îÇ       ‚îî‚îÄ‚îÄ constants/game.ts
‚îî‚îÄ‚îÄ for gpt/                 # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è GPT
```

–¢–ï–•–ù–û–õ–û–ì–ò–ß–ï–°–ö–ò–ô –°–¢–ï–ö:
- Frontend: Next.js 14, TypeScript, Tailwind CSS, Phaser 3
- Backend: Node.js, Socket.io (63 —Å–æ–±—ã—Ç–∏—è), Express
- Database: PostgreSQL + Prisma ORM
- Deploy: Render.com (–∞–≤—Ç–æ–¥–µ–ø–ª–æ–π –∏–∑ master)

=================================================================
CORE LOOP (–æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –∏–≥—Ä—ã)
=================================================================

1. –¢–∞–ø–∞–µ—à—å –ø–æ –æ–±—â–µ–º—É –±–æ—Å—Å—É (MMO - –≤—Å–µ –∏–≥—Ä–æ–∫–∏ –±—å—é—Ç –æ–¥–Ω–æ–≥–æ –±–æ—Å—Å–∞)
2. –ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞–µ—à—å Participation Score (PS) –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
3. –ó–∞ —É–±–∏–π—Å—Ç–≤–æ –±–æ—Å—Å–∞ –ø–æ–ª—É—á–∞–µ—à—å XP/SP + –°–£–ù–î–£–ö–ò + LOTTERY TICKETS (–ø–æ —Ä–∞–Ω–≥—É —É—Ä–æ–Ω–∞)
4. –°—É–Ω–¥—É–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ —Ç–∞–π–º–µ—Ä—É ‚Üí –ø–æ–ª—É—á–∞–µ—à—å gold, —à–º–æ—Ç, enchant charges
5. –≠–∫–∏–ø–∏—Ä—É–µ—à—å —à–º–æ—Ç ‚Üí —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è —É—Ä–æ–Ω ‚Üí –±—ã—Å—Ç—Ä–µ–µ —É–±–∏–≤–∞–µ—à—å –±–æ—Å—Å–∞
6. –ó–∞—Ç–æ—á–∫–∞ —à–º–æ—Ç–∞ ‚Üí –µ—â—ë –±–æ–ª—å—à–µ —É—Ä–æ–Ω–∞
7. –£—Ä–æ–≤–µ–Ω—å = –±–æ–ª—å—à–µ —É—Ä–æ–Ω–∞, —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–∫–∏–ª–ª–æ–≤
8. Daily Tasks + AP milestones ‚Üí –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã
9. 14-Day Check-In ‚Üí –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±–æ–Ω—É—Å—ã

=================================================================
SOCKET.IO –°–û–ë–´–¢–ò–Ø (63 –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
=================================================================

–ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–Ø:
- auth                 ‚Üí Telegram login —Å initData
- player:get           ‚Üí –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∞
- activity:ping        ‚Üí –ü–∏–Ω–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–∫–∞–∂–¥—ã–µ 5 —Å–µ–∫)
- session:heartbeat    ‚Üí Keep-alive

–ë–û–ï–í–ê–Ø –°–ò–°–¢–ï–ú–ê:
- tap:batch            ‚Üí –û—Å–Ω–æ–≤–Ω–æ–π —É—Ä–æ–Ω (—Å –∫—Ä–∏—Ç, –±–∞—Ñ—Ñ–∞–º–∏)
- skill:use            ‚Üí –°–∫–∏–ª–ª (fireball/iceball/lightning)
- skill:upgrade        ‚Üí –ê–ø–≥—Ä–µ–π–¥ –Ω–∞–≤—ã–∫–æ–≤ –∑–∞ SP
- skill:passive-upgrade ‚Üí –ü–∞—Å—Å–∏–≤–Ω—ã–µ —É–º–µ–Ω–∏—è
- autoAttack:toggle    ‚Üí AUTO —Ä–µ–∂–∏–º
- ether:toggle         ‚Üí –ê–≤—Ç–æ-—ç—Ñ–∏—Ä

–°–£–ù–î–£–ö–ò:
- chest:get            ‚Üí –°–ø–∏—Å–æ–∫ —Å—É–Ω–¥—É–∫–æ–≤
- chest:open           ‚Üí –ù–∞—á–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç–∏–µ
- chest:claim          ‚Üí –ó–∞–±—Ä–∞—Ç—å –Ω–∞–≥—Ä–∞–¥—É
- chest:use-key        ‚Üí –û—Ç–∫—Ä—ã—Ç—å –∫–ª—é—á–æ–º
- chest:boost          ‚Üí –£—Å–∫–æ—Ä–∏—Ç—å –∑–∞ –∫—Ä–∏—Å—Ç–∞–ª–ª—ã
- chest:buySlot        ‚Üí –ö—É–ø–∏—Ç—å —Å–ª–æ—Ç

–ó–ê–¢–û–ß–ö–ê –ò –ö–£–ó–ù–ò–¶–ê:
- forge:get            ‚Üí –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
- forge:salvage        ‚Üí –†–∞–∑–æ–±—Ä–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç
- forge:restore        ‚Üí –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–ª–æ–º–∞–Ω–Ω—ã–π
- forge:abandon        ‚Üí –£–¥–∞–ª–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç
- enchant:try          ‚Üí –ü–æ–ø—ã—Ç–∫–∞ –∑–∞—Ç–æ—á–∫–∏
- merge:preview        ‚Üí –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–ª–∏—è–Ω–∏—è
- merge:attempt        ‚Üí –í—ã–ø–æ–ª–Ω–∏—Ç—å —Å–ª–∏—è–Ω–∏–µ

–ó–ê–î–ê–ù–ò–Ø:
- tasks:get            ‚Üí –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á
- tasks:claim          ‚Üí –ó–∞–±—Ä–∞—Ç—å –Ω–∞–≥—Ä–∞–¥—É
- ap:status            ‚Üí Activity Points
- ap:claim             ‚Üí –ó–∞–±—Ä–∞—Ç—å AP milestone
- checkin:status       ‚Üí Check-in –∫–∞–ª–µ–Ω–¥–∞—Ä—å
- checkin:claim        ‚Üí –ó–∞–±—Ä–∞—Ç—å check-in

–ù–ê–ì–†–ê–î–´ –ó–ê –ë–û–°–°–ê:
- rewards:get          ‚Üí –ü–æ–ª—É—á–∏—Ç—å pending rewards
- rewards:claim        ‚Üí –ó–∞–±—Ä–∞—Ç—å –Ω–∞–≥—Ä–∞–¥—ã

=================================================================
–†–ï–°–£–†–°–´ (SSOT - –ë–î –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã)
=================================================================

–í–ê–õ–Æ–¢–ê:
- Gold (ü™ô) - –æ—Å–Ω–æ–≤–Ω–∞—è –≤–∞–ª—é—Ç–∞
- Crystals (üíé, ancientCoin –≤ –ë–î) - –ø—Ä–µ–º–∏—É–º –≤–∞–ª—é—Ç–∞
- Lottery Tickets (üéüÔ∏è) - –¥–ª—è —Ä–æ–∑—ã–≥—Ä—ã—à–µ–π

–†–ê–°–•–û–î–ù–ò–ö–ò:
- Ether (‚ú®) - x2 —É—Ä–æ–Ω–∞ –∑–∞ —Ç–∞–ø
- Ether Dust (üå´Ô∏è) - –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è –æ—Ñ—Ñ–ª–∞–π–Ω
- Scroll Haste (‚ö°) - +30% —Å–∫–æ—Ä–æ—Å—Ç—å 30 —Å–µ–∫
- Scroll Acumen (üî•) - +50% —É—Ä–æ–Ω–∞ 30 —Å–µ–∫
- Scroll Luck (üçÄ) - +10% –∫—Ä–∏—Ç 60 —Å–µ–∫
- Enchant Charges (‚öóÔ∏è) - –¥–ª—è –∑–∞—Ç–æ—á–∫–∏
- Protection Charges (üõ°Ô∏è) - –∑–∞—â–∏—Ç–∞ –ø—Ä–∏ –∑–∞—Ç–æ—á–∫–µ

–ö–õ–Æ–ß–ò:
- Wooden/Bronze/Silver/Gold Key - –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ

=================================================================
ELIGIBILITY –°–ò–°–¢–ï–ú–ê
=================================================================

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—ã –∑–∞ –±–æ—Å—Å–∞:
- 60 —Å–µ–∫—É–Ω–¥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ù–ê battle tab, –ò–õ–ò
- 20 –¥–µ–π—Å—Ç–≤–∏–π (—Ç–∞–ø—ã + —Å–∫–∏–ª–ª—ã)

–ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢:
- –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç 'activity:ping' –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
- –°–µ—Ä–≤–µ—Ä —Å—á–∏—Ç–∞–µ—Ç activityTime (–º–∞–∫—Å +10 —Å–µ–∫ –∑–∞ –ø–∏–Ω–≥)
- –ü—Ä–∏ —Å–º–µ–Ω–µ –±–æ—Å—Å–∞ activity —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è!

=================================================================
–ù–ê–ì–†–ê–î–´ –ó–ê –ë–û–°–°–ê
=================================================================

–ë–ê–ó–û–í–ê–Ø –ù–ê–ì–†–ê–î–ê (–≤—Å–µ eligible):
- 2 Wooden —Å—É–Ω–¥—É–∫–∞
- 1 Lottery Ticket

–†–ê–ù–ì–û–í–´–ï –ë–û–ù–£–°–´:
| Rank    | Gold | Silver | Bronze | Wooden | Tickets | Badge      |
|---------|------|--------|--------|--------|---------|------------|
| #1      | +1   | +2     | +2     | -      | +10     | Slayer 7d  |
| #2      | +1   | +1     | +2     | -      | +6      | Elite 7d   |
| #3      | +1   | +1     | +1     | -      | +4      | Elite 3d   |
| #4-10   | -    | +1     | +1     | -      | +2      | -          |
| #11-25  | -    | +1     | -      | -      | +1      | -          |
| #26-50  | -    | -      | +1     | +1     | +1      | -          |
| #51-100 | -    | -      | +1     | -      | +1      | -          |

–ö–†–ò–°–¢–ê–õ–õ–´ –±–æ–Ω—É—Å:
- Gold chest = +10 crystals
- Silver chest = +5 crystals

=================================================================
PARTICIPATION SCORE (PS)
=================================================================

PS = –æ—á–∫–∏ —É—á–∞—Å—Ç–∏—è –≤ –±–∏—Ç–≤–µ —Å –±–æ—Å—Å–æ–º.

–ù–ê–ö–û–ü–õ–ï–ù–ò–ï:
- +1 PS –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –ö–∞–ø–∞: 24 PS –∑–∞ –±–æ—Å—Å–∞ (~2 —á–∞—Å–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)

–í–õ–ò–Ø–ù–ò–ï PS –ù–ê XP:
- 90% XP –æ—Ç –≤–µ—Å–∞ participation: min(PS/6, 1)
- 10% XP –±–æ–Ω—É—Å –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: PS/24

=================================================================
–°–£–ù–î–£–ö–ò
=================================================================

| –¢–∏–ø    | –í—Ä–µ–º—è  | Gold        | –®–º–æ—Ç | Enchant | Protection |
|--------|--------|-------------|------|---------|------------|
| Wooden | 5 –º–∏–Ω  | 200-600     | 55%  | 1-2     | 0%         |
| Bronze | 30 –º–∏–Ω | 800-1,200   | 80%  | 2-4     | 0%         |
| Silver | 4 —á–∞—Å–∞ | 2,000-3,000 | 100% | 4-8     | 0%         |
| Gold   | 8 —á–∞—Å  | 6,000-8,000 | 100% | 8-15    | 5%         |

–°–õ–û–¢–´: 5 –±–µ—Å–ø–ª–∞—Ç–Ω–æ, –¥–æ–∫—É–ø–∞—é—Ç—Å—è –∑–∞ 50/150/300/500/750/1000+ crystals

=================================================================
–ó–ê–¢–û–ß–ö–ê (ENCHANT SYSTEM v1.2)
=================================================================

–®–ê–ù–°–´ –£–°–ü–ï–•–ê:
| –£—Ä–æ–≤–µ–Ω—å | –®–∞–Ω—Å   |
|---------|--------|
| +0‚Üí+3   | 100%   | (Safe Zone)
| +4      | 66%    |
| +5      | 55%    |
| +6      | 45%    |
| +7      | 40%    |
| +8      | 33%    |
| +9      | 30%    |
| +10     | 25%    |

–ë–û–ù–£–°: +3% –æ—Ç –±–∞–∑–æ–≤–æ–≥–æ —Å—Ç–∞—Ç–∞ –∑–∞ –∫–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å

–ü–†–ò –ü–†–û–í–ê–õ–ï:
- Safe Zone: –Ω–∏—á–µ–≥–æ
- –ë–µ–∑ –∑–∞—â–∏—Ç—ã: –õ–û–ú–ê–ï–¢–°–Ø
- –° –∑–∞—â–∏—Ç–æ–π: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

–°–õ–û–ú–ê–ù–ù–´–ï –ü–†–ï–î–ú–ï–¢–´:
- 8 —á–∞—Å–æ–≤ –¥–æ –∞–≤—Ç–æ-—É–¥–∞–ª–µ–Ω–∏—è
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ: BaseByRarity * (1 + enchantLevel * 0.25)
- Base costs: common=10üíé, uncommon=25üíé, rare=60üíé, epic=120üíé

=================================================================
–ó–ê–î–ê–ù–ò–Ø (TASKS v2.0)
=================================================================

DAILY TASKS (—Å–±—Ä–æ—Å –≤ 00:00 UTC):
| ID           | –û–ø–∏—Å–∞–Ω–∏–µ              | –¶–µ–ª—å   | AP  |
|--------------|-----------------------|--------|-----|
| D1_login     | –ó–∞–π—Ç–∏ –≤ –∏–≥—Ä—É          | 1      | 10  |
| D2_bossDamage| –ù–∞–Ω–µ—Å—Ç–∏ —É—Ä–æ–Ω          | 10,000 | 20  |
| D3_taps      | –°–¥–µ–ª–∞—Ç—å —Ç–∞–ø–æ–≤         | 500    | 15  |
| D4_skills    | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫–∏–ª–ª—ã   | 10     | 15  |
| D5_chest     | –û—Ç–∫—Ä—ã—Ç—å —Å—É–Ω–¥—É–∫        | 1      | 20  |

GRIND TASKS:
| ID           | –û–ø–∏—Å–∞–Ω–∏–µ              | –¶–µ–ª—å    | AP  |
|--------------|-----------------------|---------|-----|
| G1_bossGrind | –£–±–∏—Ç—å –±–æ—Å—Å–æ–≤          | 5       | 30  |
| G2_damageGrind| –ù–∞–Ω–µ—Å—Ç–∏ —É—Ä–æ–Ω–∞        | 100,000 | 25  |
| G3_chestGrind| –û—Ç–∫—Ä—ã—Ç—å —Å—É–Ω–¥—É–∫–æ–≤      | 10      | 25  |

AP MILESTONES:
| AP  | –ù–∞–≥—Ä–∞–¥–∞          |
|-----|------------------|
| 30  | 5,000 ü™ô         |
| 60  | 2 Lottery Tickets|
| 100 | 1 Bronze Chest   |

=================================================================
14-DAY CHECK-IN
=================================================================

| –î–µ–Ω—å | –ù–∞–≥—Ä–∞–¥–∞              |
|------|----------------------|
| 1    | 1,000 ü™ô            |
| 2    | 2 Enchant Charges   |
| 3    | 2,000 ü™ô            |
| 4    | 1 Protection        |
| 5    | 3,000 ü™ô            |
| 6    | 1 Lottery Ticket    |
| 7    | 5 üíé                |
| 8    | 4,000 ü™ô            |
| 9    | 3 Enchant Charges   |
| 10   | 5,000 ü™ô            |
| 11   | 2 Protection        |
| 12   | 2 Lottery Tickets   |
| 13   | 7,000 ü™ô            |
| 14   | 10 üíé               |

=================================================================
–°–ö–ò–õ–õ–´
=================================================================

–ê–ö–¢–ò–í–ù–´–ï:
| –°–∫–∏–ª–ª     | –£—Ä–æ–≤–µ–Ω—å | –ú–∞–Ω–∞ | –ö–î   | –£—Ä–æ–Ω            |
|-----------|---------|------|------|-----------------|
| Fireball  | 1       | 100  | 10—Å  | 100 + P.Atk √ó 3 |
| Ice Ball  | 2       | 100  | 10—Å  | 100 + P.Atk √ó 3 |
| Lightning | 3       | 100  | 10—Å  | 100 + P.Atk √ó 3 |

MASTERY: 10 —Ä–∞–Ω–≥–æ–≤, +3% —É—Ä–æ–Ω–∞ –∑–∞ —Ä–∞–Ω–≥ (Gold + SP)

TIERS (–ø–æ –∫–∞—Å—Ç–∞–º):
| –ö–∞—Å—Ç–æ–≤ | –ë–æ–Ω—É—Å    |
|--------|----------|
| 50     | +3% —É—Ä–æ–Ω |
| 200    | +7% —É—Ä–æ–Ω |
| 500    | +15% —É—Ä–æ–Ω|
| 1000   | +25% —É—Ä–æ–Ω|

–ü–ê–°–°–ò–í–ù–´–ï:
| –°–∫–∏–ª–ª           | –≠—Ñ—Ñ–µ–∫—Ç              | –ú–∞–∫—Å |
|-----------------|---------------------|------|
| Arcane Power    | +2% pAtk/—Ä–∞–Ω–≥       | 10   |
| Crit Focus      | +0.6% –∫—Ä–∏—Ç/—Ä–∞–Ω–≥     | 10   |
| Crit Power      | +6% –∫—Ä–∏—Ç —É—Ä–æ–Ω/—Ä–∞–Ω–≥  | 10   |
| Stamina Training| +50 stamina/—Ä–∞–Ω–≥    | 10   |
| Mana Flow       | +30 mana/—Ä–∞–Ω–≥       | 10   |
| Ether Efficiency| -6% —Ä–∞—Å—Ö–æ–¥–∞/—Ä–∞–Ω–≥    | 5    |

=================================================================
–§–û–†–ú–£–õ–ê –£–†–û–ù–ê
=================================================================

BASE PATK: 10 + max(0, str - 10)

EQUIPMENT PATK:
- equipPAtk = sum(item.pAtk for equipped items)
- enchantBonus = sum(item.pAtk * item.enchant * 0.03)

SET BONUS:
- 3/7: +3% P.Atk
- 6/7: +5% P.Atk, +5% P.Def

TOTAL PATK:
pAtk = (basePAtk + equipPAtk + enchantBonus) * (1 + setBonus + passiveBonus)

–£–†–û–ù –ó–ê –¢–ê–ü:
damage = pAtk * modifiers * dampeningMultiplier
modifiers = ether(x2) * acumen(x1.5) * crit(x1.5)

=================================================================
–ë–û–°–° –°–ò–°–¢–ï–ú–ê
=================================================================

4 –£–ù–ò–ö–ê–õ–¨–ù–´–• –ë–û–°–°–ê:
1. Serpent Queen - HP: 500K
2. Golem King - HP: 750K
3. Shadow Lord - HP: 1M
4. Dragon Emperor - HP: 1.5M

RESPAWN: 3 –º–∏–Ω—É—Ç—ã –ø–æ—Å–ª–µ —É–±–∏–π—Å—Ç–≤–∞

RAGE PHASES:
- 100-75% HP: x1.0
- 75-50% HP: x1.2
- 50-25% HP: x1.5
- 25-0% HP: x2.0

DAMPENING (–∞–Ω—Ç–∏-–∑–µ—Ä–≥):
- –ú–∏–Ω–∏–º—É–º 24 —á–∞—Å–∞ –∂–∏–∑–Ω–∏
- –ü—Ä–∏ –≤—ã—Å–æ–∫–æ–º DPS —É—Ä–æ–Ω —Å–Ω–∏–∂–∞–µ—Ç—Å—è –¥–æ 15%

=================================================================
STAMINA/MANA –°–ò–°–¢–ï–ú–ê
=================================================================

STAMINA:
- –ë–∞–∑–æ–≤–∞—è: 800 + (Vitality - 10) * 80
- –¢—Ä–∞—Ç–∏—Ç—Å—è: 1 –∑–∞ —Ç–∞–ø
- –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è: +1/—Å–µ–∫
- –ü—Ä–∏ 0: "Exhausted" –Ω–∞ 30 —Å–µ–∫

MANA:
- –ë–∞–∑–æ–≤–∞—è: 400 + (Spirit - 10) * 40
- –¢—Ä–∞—Ç–∏—Ç—Å—è: 100 –∑–∞ —Å–∫–∏–ª–ª
- –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è: +1/—Å–µ–∫

=================================================================
–≠–ö–ò–ü–ò–†–û–í–ö–ê
=================================================================

–°–õ–û–¢–´: Weapon, Shield, Helmet, Chest, Gloves, Legs, Boots

–†–ï–î–ö–û–°–¢–ò:
| –†–µ–¥–∫–æ—Å—Ç—å | pAtk (weapon) | pDef (armor) |
|----------|---------------|--------------|
| Common   | 8-10          | 1-3          |
| Uncommon | 12-14         | 3-5          |
| Rare     | 16-18         | 5-7          |
| Epic     | 20-24         | 8-10         |

–°–ï–¢–´:
- Common: Adventurer, Leather
- Uncommon: Scout, Hunter
- Rare: Soldier, Knight
- Epic: Guardian, Warlord, Champion, Immortal

=================================================================
UI –ö–û–ú–ü–û–ù–ï–ù–¢–´ –ò –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê
=================================================================

PhaserGame.tsx (–≥–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä):
‚îú‚îÄ‚îÄ TopHUD (—Ä–µ—Å—É—Ä—Å—ã, HP, PS, –±–∞—Ñ—Ñ—ã)
‚îú‚îÄ‚îÄ Phaser Canvas (–±–æ–µ–≤–∞—è —Å—Ü–µ–Ω–∞)
‚îú‚îÄ‚îÄ Boss HP Bar
‚îú‚îÄ‚îÄ SkillBar (3 —Å–∫–∏–ª–ª–∞ + Ether + AUTO)
‚îî‚îÄ‚îÄ –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞:
    ‚îú‚îÄ‚îÄ VictoryOverlay (–Ω–∞–≥—Ä–∞–¥—ã –∑–∞ –±–æ—Å—Å–∞)
    ‚îú‚îÄ‚îÄ WelcomeCarousel (4 —ç–∫—Ä–∞–Ω–∞)
    ‚îú‚îÄ‚îÄ MeditationModal (–æ—Ñ—Ñ–ª–∞–π–Ω –ø—ã–ª—å)
    ‚îú‚îÄ‚îÄ TasksModal
    ‚îú‚îÄ‚îÄ ForgeModal
    ‚îú‚îÄ‚îÄ EnchantModal
    ‚îî‚îÄ‚îÄ DebugModal

–¢–∞–±—ã:
‚îú‚îÄ‚îÄ CharacterTab (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∞, –Ω–∞–≤—ã–∫–∏)
‚îú‚îÄ‚îÄ TreasuryTab (—Å—É–Ω–¥—É–∫–∏, –Ω–∞–≥—Ä–∞–¥—ã, –∫–ª—é—á–∏)
‚îú‚îÄ‚îÄ LeaderboardTab (—Ä–µ–π—Ç–∏–Ω–≥–∏)
‚îî‚îÄ‚îÄ ShopTab (–ø–æ–∫—É–ø–∫–∏)

=================================================================
–°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø –î–ê–ù–ù–´–•
=================================================================

–ü–ê–¢–¢–ï–†–ù SSOT:
- –ë–î = –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã –¥–ª—è —Ä–µ—Å—É—Ä—Å–æ–≤
- –ü–∞–º—è—Ç—å (player.*) = –∫—ç—à, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫
- Dirty flagging: player.dirty = true –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏

–ü–†–ê–í–ò–õ–¨–ù–û:
```javascript
const updated = await prisma.user.update({
  data: { gold: { decrement: BigInt(cost) } },
  select: { gold: true },
});
player.gold = Number(updated.gold); // sync –ü–û–°–õ–ï –ë–î
```

–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:
```javascript
player.gold -= cost;
await prisma.user.update({ data: { gold: BigInt(player.gold) } });
```

–°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø –ú–ï–ñ–î–£ –¢–ê–ë–ê–ú–ò:
- –ö–∞–∂–¥—ã–π —Ç–∞–± —Å–ª—É—à–∞–µ—Ç player:state —Å–æ–±—ã—Ç–∏–µ
- –ù–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ state manager (Redux/Zustand)
- –ü—Ä–∏ –¥–µ–π—Å—Ç–≤–∏–∏ –≤ –æ–¥–Ω–æ–º —Ç–∞–±–µ, –¥—Ä—É–≥–∏–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ socket

=================================================================
–°–ï–†–í–ï–†–ù–´–ï –ò–ù–¢–ï–†–í–ê–õ–´
=================================================================

| –ò–Ω—Ç–µ—Ä–≤–∞–ª   | –§—É–Ω–∫—Ü–∏—è                    |
|------------|----------------------------|
| 250 –º—Å     | broadcast boss:state       |
| 1 —Å–µ–∫      | boss state save, respawn   |
| 1 —Å–µ–∫      | stamina/mana regen         |
| 5 –º–∏–Ω      | PS tick (+1 –∞–∫—Ç–∏–≤–Ω—ã–º)      |
| 5 –º–∏–Ω      | dampening update           |
| 10 —Å–µ–∫     | flush dirty players to DB  |
| 1 –º–∏–Ω      | broken items cleanup       |
| 60 —Å–µ–∫     | DPS sampling               |

=================================================================
–ù–ê–ô–î–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –ò –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò
=================================================================

–î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï –ö–û–î–ê:
1. player:state emission - 8 –º–µ—Å—Ç (–Ω—É–∂–µ–Ω helper)
2. formatCompact - 2 —Ä–∞–∑–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–∑ constants)
3. lang detection - –≤ –∫–∞–∂–¥–æ–º —Ç–∞–±–µ (–≤—ã–Ω–µ—Å—Ç–∏ –≤ —Ö—É–∫)
4. socket listeners setup - –≤–µ–∑–¥–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω

–ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨:
1. PhaserGame useEffect - 500+ —Å—Ç—Ä–æ–∫ (—Ä–∞–∑–±–∏—Ç—å –Ω–∞ 6 —ç—Ñ—Ñ–µ–∫—Ç–æ–≤)
2. TopHUD/SkillBar - –Ω–µ—Ç React.memo
3. LeaderboardTab - –æ–ø—Ä–æ—Å –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫ (—É–≤–µ–ª–∏—á–∏—Ç—å –¥–æ 5-10)
4. –ù–µ—Ç –º–µ–º–æ–∏–∑–∞—Ü–∏–∏ formatNumber

–ú–Å–†–¢–í–´–ô –ö–û–î:
1. serverUptime state - –æ–±—ä—è–≤–ª–µ–Ω, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
2. formatCompact import - –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–π
3. DEBUG_EQUIPMENT - —Ç–µ—Å—Ç–æ–≤–æ–µ –æ—Ä—É–∂–∏–µ, —É–¥–∞–ª–∏—Ç—å –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º

–ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï:
1. –ù–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ state management
2. sessionLeaderboard –Ω–µ –æ—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ respawn
3. onlineUsers –º–æ–∂–µ—Ç –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å—Å—è (–Ω–µ—Ç cleanup)
4. Race condition –≤ chest:claim (mutex –µ—Å—Ç—å, –Ω–æ –Ω–µ—Ç timeout)

=================================================================
–ë–ê–ó–ê –î–ê–ù–ù–´–• (PRISMA SCHEMA)
=================================================================

–û–°–ù–û–í–ù–´–ï –¢–ê–ë–õ–ò–¶–´:
- User (190 –ø–æ–ª–µ–π!) - –∏–≥—Ä–æ–∫, —Ä–µ—Å—É—Ä—Å—ã, —Å—Ç–∞—Ç—ã, –ø—Ä–æ–≥—Ä–µ—Å—Å
- Equipment - —à–∞–±–ª–æ–Ω—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- UserEquipment - —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —É –∏–≥—Ä–æ–∫–æ–≤
- Chest - —Å—É–Ω–¥—É–∫–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ—Ç–∫—Ä—ã—Ç–∏—è
- PendingReward - –Ω–∞–≥—Ä–∞–¥—ã –∑–∞ –±–æ—Å—Å–∞
- BossSession - –∏—Å—Ç–æ—Ä–∏—è –±–æ—Å—Å–æ–≤
- DailyTaskProgress - –ø—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–¥–∞—á
- WeeklyTaskProgress - –Ω–µ–¥–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
- UserBadge - –±–µ–π–¥–∂–∏ –∏–≥—Ä–æ–∫–æ–≤
- ActiveBuff - –∞–∫—Ç–∏–≤–Ω—ã–µ –±–∞—Ñ—ã
- GameState - singleton —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –±–æ—Å—Å–∞

ENUM-—ã:
- EquipmentSlot: WEAPON, HELMET, CHEST, GLOVES, LEGS, BOOTS, SHIELD
- ItemRarity: COMMON, UNCOMMON, RARE, EPIC
- ChestType: WOODEN, BRONZE, SILVER, GOLD
- BuffType: HASTE, ACUMEN, LUCK

=================================================================
ADMIN API –≠–ù–î–ü–û–ò–ù–¢–´
=================================================================

–¢—Ä–µ–±—É—é—Ç X-Admin-Password –∑–∞–≥–æ–ª–æ–≤–æ–∫:

–ë–û–°–°:
- POST /api/admin/boss/change
- POST /api/admin/boss/respawn
- POST /api/admin/boss/update

–ò–ì–†–û–ö–ò:
- GET /api/admin/users
- GET /api/admin/user-stats
- GET /api/admin/online

–í–´–î–ê–ß–ê:
- POST /api/admin/chests/give
- POST /api/admin/crystals/give
- POST /api/admin/equipment/give

–û–ü–ê–°–ù–´–ï:
- POST /api/admin/danger/reset-all
- POST /api/admin/danger/delete-user
- POST /api/admin/danger/reset-boss

=================================================================
–í–ï–†–°–ò–Ø –î–û–ö–£–ú–ï–ù–¢–ê: v1.8.19
–î–ê–¢–ê: 2026-01-11
–ê–í–¢–û–†: Claude Code Analysis
=================================================================
