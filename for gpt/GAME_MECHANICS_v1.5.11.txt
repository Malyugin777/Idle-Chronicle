=================================================================
IDLE CHRONICLE - –ü–û–õ–ù–û–ï –û–ü–ò–°–ê–ù–ò–ï –ò–ì–†–´ v1.5.11
=================================================================

–ñ–ê–ù–†: Idle Clicker MMO-RPG –¥–ª—è Telegram Mini App
–°–ï–¢–¢–ò–ù–ì: –§—ç–Ω—Ç–µ–∑–∏ –≤ —Å—Ç–∏–ª–µ Lineage 2
–ü–õ–ê–¢–§–û–†–ú–ê: Web (Next.js + Phaser 3 + Socket.io)

=================================================================
CORE LOOP (–æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –∏–≥—Ä—ã)
=================================================================

1. –¢–∞–ø–∞–µ—à—å –ø–æ –æ–±—â–µ–º—É –±–æ—Å—Å—É (MMO - –≤—Å–µ –∏–≥—Ä–æ–∫–∏ –±—å—é—Ç –æ–¥–Ω–æ–≥–æ –±–æ—Å—Å–∞)
2. –ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞–µ—à—å Participation Score (PS) –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
3. –ó–∞ —É–±–∏–π—Å—Ç–≤–æ –±–æ—Å—Å–∞ –ø–æ–ª—É—á–∞–µ—à—å XP/SP + –°–£–ù–î–£–ö–ò + LOTTERY TICKETS (–ø–æ —Ä–∞–Ω–≥—É —É—Ä–æ–Ω–∞)
4. –°—É–Ω–¥—É–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ —Ç–∞–π–º–µ—Ä—É ‚Üí –ø–æ–ª—É—á–∞–µ—à—å gold, —à–º–æ—Ç, enchant charges
5. –≠–∫–∏–ø–∏—Ä—É–µ—à—å —à–º–æ—Ç ‚Üí —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è —É—Ä–æ–Ω ‚Üí –±—ã—Å—Ç—Ä–µ–µ —É–±–∏–≤–∞–µ—à—å –±–æ—Å—Å–∞
6. –£—Ä–æ–≤–µ–Ω—å = –±–æ–ª—å—à–µ —É—Ä–æ–Ω–∞, —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–∫–∏–ª–ª–æ–≤

=================================================================
ELIGIBILITY –°–ò–°–¢–ï–ú–ê (—É—Å–ª–æ–≤–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–≥—Ä–∞–¥)
=================================================================

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—ã –∑–∞ –±–æ—Å—Å–∞, –∏–≥—Ä–æ–∫ –¥–æ–ª–∂–µ–Ω —Å—Ç–∞—Ç—å "eligible":

–£–°–õ–û–í–ò–Ø (–ª—é–±–æ–µ –∏–∑ –¥–≤—É—Ö):
1. 60 —Å–µ–∫—É–Ω–¥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –Ω–∞ battle tab
2. 20 –¥–µ–π—Å—Ç–≤–∏–π (—Ç–∞–ø—ã + —Å–∫–∏–ª–ª—ã)

–ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢:
- –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç 'activity:ping' –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥ –ø–æ–∫–∞ –∏–≥—Ä–æ–∫ –Ω–∞ battle tab
- –°–µ—Ä–≤–µ—Ä —Å—á–∏—Ç–∞–µ—Ç activityTime (–º–∞–∫—Å +10 —Å–µ–∫ –∑–∞ –ø–∏–Ω–≥, –∞–Ω—Ç–∏-—á–∏—Ç)
- –¢–∞–∫–∂–µ —Å—á–∏—Ç–∞—é—Ç—Å—è sessionClicks (—Ç–∞–ø—ã –∏ —Å–∫–∏–ª–ª—ã)
- –ö–æ–≥–¥–∞ activityTime >= 60000ms –ò–õ–ò sessionClicks >= 20 ‚Üí isEligible = true

–í–ê–ñ–ù–û:
- –ü—Ä–∏ —Å–º–µ–Ω–µ –±–æ—Å—Å–∞ (–Ω–æ–≤—ã–π sessionId) activity —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è!
- –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –ù–ï eligible ‚Üí –ø–æ–ª—É—á–∞–µ—Ç 0 –Ω–∞–≥—Ä–∞–¥
- isEligible —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ leaderboard entry –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞—Å—á—ë—Ç–µ –Ω–∞–≥—Ä–∞–¥

–ö–û–î (server.js):
```javascript
socket.on('activity:ping', () => {
  // ...
  const timeSinceLastPing = Math.min(now - player.lastActivityPing, 10000);
  player.activityTime += timeSinceLastPing;

  const actions = player.sessionClicks || 0;
  if (!player.isEligible && (player.activityTime >= 60000 || actions >= 20)) {
    player.isEligible = true;
  }
});
```

=================================================================
–ù–ê–ì–†–ê–î–´ –ó–ê –ë–û–°–°–ê (–ø–æ —Ä–∞–Ω–≥–∞–º)
=================================================================

–ù–∞–≥—Ä–∞–¥—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –¢–û–õ–¨–ö–û eligible –∏–≥—Ä–æ–∫–∞–º!

–ë–ê–ó–û–í–ê–Ø –ù–ê–ì–†–ê–î–ê (–≤—Å–µ eligible):
- 2 Wooden —Å—É–Ω–¥—É–∫–∞
- 1 Lottery Ticket

–†–ê–ù–ì–û–í–´–ï –ë–û–ù–£–°–´:
| Rank    | Gold | Silver | Bronze | Wooden | Extra Tickets | Badge      |
|---------|------|--------|--------|--------|---------------|------------|
| #1      | +1   | +2     | +2     | -      | +10           | Slayer 7d  |
| #2      | +1   | +1     | +2     | -      | +6            | Elite 7d   |
| #3      | +1   | +1     | +1     | -      | +4            | Elite 3d   |
| #4-10   | -    | +1     | +1     | -      | +2            | -          |
| #11-25  | -    | +1     | -      | -      | +1            | -          |
| #26-50  | -    | -      | +1     | +1     | +1            | -          |
| #51-100 | -    | -      | +1     | -      | +1            | -          |
| #101+   | -    | -      | -      | -      | -             | -          |

–ö–†–ò–°–¢–ê–õ–õ–´ (crystals) –±–æ–Ω—É—Å:
- Gold chest = +10 crystals
- Silver chest = +5 crystals

–ù–ï ELIGIBLE = 0 –ù–ê–ì–†–ê–î!
–ï—Å–ª–∏ isEligible = false, –∏–≥—Ä–æ–∫ –ø–æ–ª—É—á–∞–µ—Ç: { wooden: 0, bronze: 0, silver: 0, gold: 0, crystals: 0, lotteryTickets: 0 }

–ö–û–î (server.js):
```javascript
const getChestRewardsByRank = (rank, isEligible) => {
  if (!isEligible) return { wooden: 0, bronze: 0, silver: 0, gold: 0, crystals: 0, lotteryTickets: 0, badge: null, badgeDays: null };

  let wooden = 2;        // Base participation reward
  let lotteryTickets = 1; // Base 1 ticket for all eligible
  // ... rank bonuses
};
```

=================================================================
PARTICIPATION SCORE (PS) –°–ò–°–¢–ï–ú–ê
=================================================================

PS = –æ—á–∫–∏ —É—á–∞—Å—Ç–∏—è –≤ –±–∏—Ç–≤–µ —Å –±–æ—Å—Å–æ–º.

–ù–ê–ö–û–ü–õ–ï–ù–ò–ï:
- +1 PS –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –ö–∞–ø–∞: 24 PS –∑–∞ –±–æ—Å—Å–∞ (~2 —á–∞—Å–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)

–í–õ–ò–Ø–ù–ò–ï PS:
- 90% XP –æ—Ç –≤–µ—Å–∞ participation: min(PS/6, 1)
- 10% XP –±–æ–Ω—É—Å –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: PS/24

–§–û–†–ú–£–õ–ê XP:
```
xpRaw = BOSS_XP[bossIndex] * (0.90 * participationWeight + 0.10 * psBonus)
participationWeight = min(PS / 6, 1)  // 6 —Ç–∏–∫–æ–≤ = 30 –º–∏–Ω –¥–ª—è 100%
psBonus = PS / 24
```

=================================================================
–°–£–ù–î–£–ö–ò
=================================================================

| –¢–∏–ø    | –í—Ä–µ–º—è –æ—Ç–∫—Ä—ã—Ç–∏—è | Gold    | –®–º–æ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | Enchant Charges |
|--------|----------------|---------|------------------|-----------------|
| Wooden | 5 –º–∏–Ω—É—Ç        | 1,000   | 55%              | 1-2             |
| Bronze | 30 –º–∏–Ω—É—Ç       | 2,500   | 80%              | 2-4             |
| Silver | 4 —á–∞—Å–∞         | 7,000   | 100%             | 4-8             |
| Gold   | 8 —á–∞—Å–æ–≤        | 20,000  | 100%             | 8-15            |

–ö–õ–Æ–ß–ò (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ):
- –ü–æ–∫—É–ø–∞—é—Ç—Å—è –≤ –º–∞–≥–∞–∑–∏–Ω–µ –∑–∞ 999 üíé (crystals)
- Wooden Key, Bronze Key, Silver Key, Gold Key

=================================================================
–ú–ê–ì–ê–ó–ò–ù (SHOP)
=================================================================

–≠–§–ò–† (Ether):
- –¶–µ–Ω–∞: 200 gold –∑–∞ 100 ether
- –≠—Ñ—Ñ–µ–∫—Ç: x2 —É—Ä–æ–Ω–∞ –∑–∞ –∫–∞–∂–¥—ã–π —Ç–∞–ø (—Ä–∞—Å—Ö–æ–¥—É–µ—Ç—Å—è)

–ë–ê–§–´ (Potions):
| –ë–∞—Ñ    | –¶–µ–Ω–∞ | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –≠—Ñ—Ñ–µ–∫—Ç              |
|--------|------|--------------|---------------------|
| Haste  | 500  | 30 —Å–µ–∫       | +30% —Å–∫–æ—Ä–æ—Å—Ç—å –∞—Ç–∞–∫–∏ |
| Acumen | 500  | 30 —Å–µ–∫       | +50% —É—Ä–æ–Ω–∞          |
| Luck   | 1000 | 60 —Å–µ–∫       | +10% –∫—Ä–∏—Ç —à–∞–Ω—Å      |

–ö–õ–Æ–ß–ò:
- –õ—é–±–æ–π –∫–ª—é—á: 999 üíé (crystals)
- Wooden, Bronze, Silver, Gold

ENCHANT CHARGES:
- –¶–µ–Ω–∞: 3,000 gold –∑–∞ 1 charge
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞—Ç–æ—á–∫–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤ Forge

=================================================================
–õ–û–¢–ï–†–ï–ô–ù–´–ï –ë–ò–õ–ï–¢–´ (Lottery Tickets)
=================================================================

–ò—Å—Ç–æ—á–Ω–∏–∫–∏:
1. –ù–∞–≥—Ä–∞–¥—ã –∑–∞ –±–æ—Å—Å–∞ (eligible –∏–≥—Ä–æ–∫–∏)
2. –ü–æ–∫—É–ø–∫–∞ (–µ—Å–ª–∏ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ)

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: (TODO - –º–µ—Ö–∞–Ω–∏–∫–∞ —Ä–æ–∑—ã–≥—Ä—ã—à–∞)

=================================================================
–§–û–†–ú–£–õ–ê –£–†–û–ù–ê
=================================================================

BASE PATK FORMULA:
```
basePAtk = 10 + max(0, str - 10)
```

TOTAL PATK:
```
pAtk = basePAtk + equipmentPAtk + enchantPAtk
```

SET BONUS (–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ):
- 3/7 –±–æ–Ω—É—Å: +3% P.Atk (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ setBonus)
- 6/7 –±–æ–Ω—É—Å: +5% P.Atk, +5% P.Def

–£–†–û–ù –ó–ê –¢–ê–ü:
```
damage = pAtk * modifiers * dampeningMultiplier
modifiers = ether(x2) * acumen(x1.5) * crit(x1.5)
```

=================================================================
–ë–ê–ì–ò –ò –î–ï–ë–ê–ì
=================================================================

–ü–†–û–í–ï–†–ö–ê ELIGIBILITY:
1. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞: "[Activity] PlayerName is now eligible"
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å player.isEligible –≤ sessionLeaderboard
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å activityTime >= 60000 –ò–õ–ò sessionClicks >= 20

–ü–†–û–í–ï–†–ö–ê –ù–ê–ì–†–ê–î:
1. previousBossSession.leaderboard —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω–∞–≥—Ä–∞–¥—ã
2. PendingReward –≤ –ë–î —Å–æ–∑–¥–∞—ë—Ç—Å—è –¥–ª—è eligible –∏–≥—Ä–æ–∫–æ–≤
3. rewards:claim –ø—Ä–æ–≤–µ—Ä—è–µ—Ç PendingReward –¥–ª—è userId + bossSessionId

–¢–ò–ü–ò–ß–ù–´–ï –ü–†–ò–ß–ò–ù–´ "–ù–ï –ü–û–õ–£–ß–ò–õ –ù–ê–ì–†–ê–î–´":
1. –ò–≥—Ä–æ–∫ –ù–ï eligible (–º–µ–Ω—å—à–µ 60 —Å–µ–∫ –∏–ª–∏ 20 –¥–µ–π—Å—Ç–≤–∏–π)
2. –ò–≥—Ä–æ–∫ —É–∂–µ –∑–∞–±—Ä–∞–ª –Ω–∞–≥—Ä–∞–¥—ã (PendingReward —É–¥–∞–ª—ë–Ω)
3. –°–º–µ–Ω–∞ –±–æ—Å—Å–∞ –≤–æ –≤—Ä–µ–º—è –±–æ—è (sessionId –∏–∑–º–µ–Ω–∏–ª—Å—è, activity —Å–±—Ä–æ—à–µ–Ω)
4. –°–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (activity:ping –Ω–µ –¥–æ—Ö–æ–¥–∏–ª)

=================================================================
–í–ï–†–°–ò–Ø –î–û–ö–£–ú–ï–ù–¢–ê: v1.5.11
–î–ê–¢–ê: 2026-01-10
=================================================================
