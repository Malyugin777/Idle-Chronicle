# ARMOR, WEAPON & STATS SYSTEM - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –û–ë–ó–û–†

Idle Chronicle –∏—Å–ø–æ–ª—å–∑—É–µ—Ç L2-style —Å–∏—Å—Ç–µ–º—É —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –∏ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏:
- 5 –±–∞–∑–æ–≤—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤ (–°–ò–õ, –õ–û–í, –°–¢–û–ô, –ò–ù–¢, –î–£–•)
- –ü—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ —Å—Ç–∞—Ç—ã (P.Atk, P.Def, Crit, MaxStamina, MaxMana)
- 7 —Å–ª–æ—Ç–æ–≤ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏
- –°–µ—Ç–æ–≤—ã–µ –±–æ–Ω—É—Å—ã (3/7, 6/7)

---

## –ë–ê–ó–û–í–´–ï –ê–¢–†–ò–ë–£–¢–´

| –ê—Ç—Ä–∏–±—É—Ç | –ë–∞–∑–∞ | –í–ª–∏—è–Ω–∏–µ |
|---------|------|---------|
| **–°–ò–õ (power)** | 10 | +1 P.Atk –∑–∞ –∫–∞–∂–¥—ã–π –ø—É–Ω–∫—Ç –≤—ã—à–µ 10 |
| **–õ–û–í (agility)** | 10 | +10 AtkSpd, +0.2% Crit –∑–∞ –ø—É–Ω–∫—Ç |
| **–°–¢–û–ô (vitality)** | 12 | +80 MaxStamina –∑–∞ –ø—É–Ω–∫—Ç |
| **–ò–ù–¢ (intellect)** | 10 | +2 Magic Power –∑–∞ –ø—É–Ω–∫—Ç |
| **–î–£–• (spirit)** | 10 | +40 MaxMana –∑–∞ –ø—É–Ω–∫—Ç |

---

## –ü–†–û–ò–ó–í–û–î–ù–´–ï –°–¢–ê–¢–´ (—Ñ–æ—Ä–º—É–ª—ã)

### P.Atk (Physical Attack)
```
P.Atk = 10 + (–°–ò–õ - 10) * 1 + equipment.pAtk
```
- –ë–∞–∑–∞ –≥–æ–ª—ã–º–∏ —Ä—É–∫–∞–º–∏ = 10
- –ö–∞–∂–¥—ã–π –ø—É–Ω–∫—Ç –°–ò–õ –≤—ã—à–µ 10 –¥–æ–±–∞–≤–ª—è–µ—Ç +1
- –û—Ä—É–∂–∏–µ –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–≤–æ–π pAtk

### P.Def (Physical Defense)
```
P.Def = 0 + equipment.pDef
```
- –ë–∞–∑–∞ –≥–æ–ª—ã–º = 0
- –¢–æ–ª—å–∫–æ –æ—Ç —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏ (—à–ª–µ–º, –±—Ä–æ–Ω—è, –ø–µ—Ä—á–∞—Ç–∫–∏, –Ω–æ–≥–∏, –±–æ—Ç–∏–Ω–∫–∏, —â–∏—Ç)

### MaxStamina
```
MaxStamina = 800 + (–°–¢–û–ô - 10) * 80
```
- –ü—Ä–∏ –°–¢–û–ô 12 (—Å—Ç–∞—Ä—Ç) = 960
- –ü—Ä–∏ –°–¢–û–ô 20 = 1600

### MaxMana
```
MaxMana = 400 + (–î–£–• - 10) * 40
```
- –ü—Ä–∏ –î–£–• 10 = 400 (—Ö–≤–∞—Ç–∞–µ—Ç –Ω–∞ 4 —Å–∫–∏–ª–ª–∞ –ø–æ 100)
- –ü—Ä–∏ –î–£–• 15 = 600

### Crit Chance
```
CritChance = 5% + (–õ–û–í - 10) * 0.2%
```
- –ë–∞–∑–∞ = 5%
- –ö–∞–ø = 50%

### Attack Speed
```
AttackSpeed = 300 + (–õ–û–í - 10) * 10
```
- 300 = 1 –∞—Ç–∞–∫–∞/—Å–µ–∫ (–∏–Ω—Ç–µ—Ä–≤–∞–ª 1000ms)
- 600 = 2 –∞—Ç–∞–∫–∏/—Å–µ–∫ (–∏–Ω—Ç–µ—Ä–≤–∞–ª 500ms)

---

## –†–ê–°–ß–ï–¢ –£–†–û–ù–ê

### –§–æ—Ä–º—É–ª–∞ —É—Ä–æ–Ω–∞ (server.js)
```javascript
const STAT_EFFECTS = { str: 0.08, dex: 0.05, luck: 0.03 };
const BASE_CRIT_CHANCE = 0.05;
const BASE_CRIT_DAMAGE = 2.0;

// –ë–∞–∑–æ–≤—ã–π —É—Ä–æ–Ω
const baseDamage = player.pAtk * (1 + player.str * STAT_EFFECTS.str);

// –° –≤–∞—Ä–∏–∞—Ü–∏–µ–π ¬±20%
let dmg = baseDamage * (0.8 + Math.random() * 0.4);

// –ö—Ä–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞
const critChance = Math.min(0.75, BASE_CRIT_CHANCE + player.luck * STAT_EFFECTS.luck);
if (Math.random() < critChance) {
  dmg *= BASE_CRIT_DAMAGE;  // x2.0
}

// –°–Ω–∏–∂–µ–Ω–∏–µ –∑–∞—â–∏—Ç–æ–π –±–æ—Å—Å–∞
dmg = Math.max(1, dmg - bossDefense);
```

### –í–ª–∏—è–Ω–∏–µ —Å—Ç–∞—Ç–æ–≤ –Ω–∞ —É—Ä–æ–Ω:
| –°—Ç–∞—Ç | –≠—Ñ—Ñ–µ–∫—Ç |
|------|--------|
| STR | +8% –∫ –±–∞–∑–æ–≤–æ–º—É —É—Ä–æ–Ω—É –∑–∞ 1 –ø—É–Ω–∫—Ç |
| DEX | +5% –∫ —á–µ–º—É-—Ç–æ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–π —Ñ–æ—Ä–º—É–ª–µ) |
| LUCK | +3% –∫ –∫—Ä–∏—Ç —à–∞–Ω—Å—É –∑–∞ 1 –ø—É–Ω–∫—Ç |

### –ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á–µ—Ç–∞:
```
pAtk = 18 (10 –±–∞–∑–∞ + 8 –æ—Ç –º–µ—á–∞ –Ω–æ–≤–∏—á–∫–∞)
str = 10

baseDamage = 18 * (1 + 10 * 0.08) = 18 * 1.8 = 32.4
–° –≤–∞—Ä–∏–∞—Ü–∏–µ–π: 26 - 39
–ü–æ—Å–ª–µ –∫—Ä–∏—Ç–∞ (–µ—Å–ª–∏): 52 - 78
```

---

## –°–õ–û–¢–´ –≠–ö–ò–ü–ò–†–û–í–ö–ò

| –°–ª–æ—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ç–∞—Ç |
|------|----------|---------------|
| **WEAPON** | –û—Ä—É–∂–∏–µ | pAtk |
| **HELMET** | –®–ª–µ–º | pDef |
| **CHEST** | –ù–∞–≥—Ä—É–¥–Ω–∏–∫ | pDef |
| **GLOVES** | –ü–µ—Ä—á–∞—Ç–∫–∏ | pDef |
| **LEGS** | –ü–æ–Ω–æ–∂–∏ | pDef |
| **BOOTS** | –ë–æ—Ç–∏–Ω–∫–∏ | pDef |
| **SHIELD** | –©–∏—Ç | pDef |

---

## –°–¢–ê–†–¢–û–í–´–ô –°–ï–¢ –ù–û–í–ò–ß–ö–ê (Common)

| –ü—Ä–µ–¥–º–µ—Ç | –°–ª–æ—Ç | –°—Ç–∞—Ç—ã |
|---------|------|-------|
| –ú–µ—á –Ω–æ–≤–∏—á–∫–∞ üó°Ô∏è | weapon | pAtk: 8 |
| –®–ª–µ–º –Ω–æ–≤–∏—á–∫–∞ ‚õëÔ∏è | helmet | pDef: 2 |
| –ù–∞–≥—Ä—É–¥–Ω–∏–∫ –Ω–æ–≤–∏—á–∫–∞ üéΩ | chest | pDef: 3 |
| –ü–µ—Ä—á–∞—Ç–∫–∏ –Ω–æ–≤–∏—á–∫–∞ üß§ | gloves | pDef: 1 |
| –ü–æ–Ω–æ–∂–∏ –Ω–æ–≤–∏—á–∫–∞ üëñ | legs | pDef: 2 |
| –ë–æ—Ç–∏–Ω–∫–∏ –Ω–æ–≤–∏—á–∫–∞ üë¢ | boots | pDef: 1 |
| –©–∏—Ç –Ω–æ–≤–∏—á–∫–∞ üõ°Ô∏è | shield | pDef: 2 |

**–ò—Ç–æ–≥–æ –ø—Ä–∏ –ø–æ–ª–Ω–æ–º —Å–µ—Ç–µ:**
- P.Atk: 10 + 8 = 18
- P.Def: 2 + 3 + 1 + 2 + 1 + 2 = 11

---

## –°–ï–¢–û–í–´–ï –ë–û–ù–£–°–´

### Novice Set (—Å–µ—Ç –Ω–æ–≤–∏—á–∫–∞)
| –ß–∞—Å—Ç–∏ | –ë–æ–Ω—É—Å |
|-------|-------|
| 3/7 | +3% P.Atk |
| 6/7 | +5% P.Atk, +5% P.Def |

### Iron Set (–∂–µ–ª–µ–∑–Ω—ã–π, –±—É–¥—É—â–µ–µ)
| –ß–∞—Å—Ç–∏ | –ë–æ–Ω—É—Å |
|-------|-------|
| 3/7 | +5% P.Def |
| 6/7 | +10% P.Def, +5% MaxStamina |

### Steel Set (—Å—Ç–∞–ª—å–Ω–æ–π, –±—É–¥—É—â–µ–µ)
| –ß–∞—Å—Ç–∏ | –ë–æ–Ω—É—Å |
|-------|-------|
| 3/7 | +5% P.Atk, +1% Crit |
| 6/7 | +10% P.Atk, +8% P.Def, +2% Crit |

---

## –†–ï–î–ö–û–°–¢–¨ (Rarity)

| Rarity | –¶–≤–µ—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|------|----------|
| common | –ë–µ–ª—ã–π | –ë–∞–∑–æ–≤—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã |
| uncommon | –ó–µ–ª–µ–Ω—ã–π | –£–ª—É—á—à–µ–Ω–Ω—ã–µ |
| rare | –°–∏–Ω–∏–π | –†–µ–¥–∫–∏–µ |
| epic | –§–∏–æ–ª–µ—Ç–æ–≤—ã–π | –≠–ø–∏—á–µ—Å–∫–∏–µ |
| legendary | –û—Ä–∞–Ω–∂–µ–≤—ã–π | –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–µ |

---

## THORNS (–£—Ä–æ–Ω –æ—Ç —à–∏–ø–æ–≤ –±–æ—Å—Å–∞)

–ë–æ—Å—Å—ã –Ω–∞–Ω–æ—Å—è—Ç –æ—Ç–≤–µ—Ç–Ω—ã–π —É—Ä–æ–Ω (thorns) –ø—Ä–∏ –∫–∞–∂–¥–æ–º —É–¥–∞—Ä–µ:

```javascript
// –§–æ—Ä–º—É–ª–∞ —Å–Ω–∏–∂–µ–Ω–∏—è —à–∏–ø–æ–≤ –±—Ä–æ–Ω—ë–π
thornsTaken = ceil(rawThorns * 100 / (100 + pDef))

// –°—Ç–æ–∏–º–æ—Å—Ç—å —Ç–∞–ø–∞ –≤ stamina
staminaCost = 1 + thornsTaken
```

–ü—Ä–∏–º–µ—Ä:
- Boss thorns = 10
- Player pDef = 11
- thornsTaken = ceil(10 * 100 / 111) = ceil(9.01) = 10
- staminaCost = 1 + 10 = 11 –∑–∞ —Ç–∞–ø

---

## –ë–ê–§–§–´ (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Å–∏–ª–µ–Ω–∏—è)

| –ë–∞—Ñ—Ñ | –≠—Ñ—Ñ–µ–∫—Ç | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å |
|------|--------|--------------|
| Haste ‚ö° | +30% Attack Speed | 30 —Å–µ–∫ |
| Acumen üî• | +50% Damage | 30 —Å–µ–∫ |
| Luck üçÄ | +10% Crit Chance | 60 —Å–µ–∫ |

---

## ETHER (–≠—Ñ–∏—Ä) - x2 —É—Ä–æ–Ω–∞

```javascript
// –ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–º autoEther –∏ ether > 0
if (player.autoEther && player.ether > 0) {
  dmg *= 2;
  player.ether -= 1;
}
```
- 1 Ether = 1 —É–¥–∞—Ä —Å x2 —É—Ä–æ–Ω–æ–º
- –ö—Ä–∞—Ñ—Ç: 5 Dust + 5 Gold = 1 Ether

---

## –ö–õ–Æ–ß–ï–í–´–ï –§–ê–ô–õ–´

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `items.ts` | –ë–∞–∑–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (ITEMS) |
| `sets.ts` | –°–µ—Ç–æ–≤—ã–µ –±–æ–Ω—É—Å—ã (SETS) |
| `StatsService.js` | –†–∞—Å—á–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã—Ö —Å—Ç–∞—Ç–æ–≤ |
| `CharacterTab.tsx` | UI —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏ –∏ —Å—Ç–∞—Ç–æ–≤ |
| `server.js` | –°–µ—Ä–≤–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞ —É—Ä–æ–Ω–∞ |

---

## –°–•–ï–ú–ê –ë–î (Prisma)

### User (–∏–≥—Ä–æ–∫)
```prisma
// –ê—Ç—Ä–∏–±—É—Ç—ã
str        Int @default(10)
dex        Int @default(10)
vit        Int @default(12)
int_       Int @default(10)
spirit     Int @default(10)

// –ü—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ
pAtk       Int @default(10)
pDef       Int @default(0)
critChance Float @default(0.05)
critDamage Float @default(2.0)

// –≠–∫–∏–ø–∏—Ä–æ–≤–∫–∞ (—Å–≤—è–∑—å)
equipment  UserEquipment[]
```

### UserEquipment (–Ω–∞–¥–µ—Ç—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã)
```prisma
model UserEquipment {
  id        String @id
  userId    String
  slot      String // WEAPON, HELMET, etc.
  itemCode  String // starter-sword, etc.
  pAtk      Int @default(0)
  pDef      Int @default(0)
  enchant   Int @default(0)
}
```

### EquipmentTemplate (—à–∞–±–ª–æ–Ω—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤)
```prisma
model EquipmentTemplate {
  id        String @id
  code      String @unique
  name      String
  slot      String
  rarity    String
  pAtkMin   Int @default(0)
  pAtkMax   Int @default(0)
  pDefMin   Int @default(0)
  pDefMax   Int @default(0)
}
```

---

## –ü–†–ò–ú–ï–† –ü–û–õ–ù–û–ì–û –†–ê–°–ß–ï–¢–ê

–ò–≥—Ä–æ–∫ —Å –ø–æ–ª–Ω—ã–º —Å–µ—Ç–æ–º –Ω–æ–≤–∏—á–∫–∞:
```
–ê—Ç—Ä–∏–±—É—Ç—ã: –°–ò–õ=10, –õ–û–í=10, –°–¢–û–ô=12

–≠–∫–∏–ø–∏—Ä–æ–≤–∫–∞:
- –ú–µ—á –Ω–æ–≤–∏—á–∫–∞: +8 pAtk
- –í—Å—è –±—Ä–æ–Ω—è: +11 pDef

–°–µ—Ç–æ–≤—ã–π –±–æ–Ω—É—Å (7/7 = 6/7 –∞–∫—Ç–∏–≤–µ–Ω):
- +5% P.Atk
- +5% P.Def

–ò—Ç–æ–≥–æ–≤—ã–µ —Å—Ç–∞—Ç—ã:
- P.Atk = (10 + 8) * 1.05 = 18.9 ‚Üí 18
- P.Def = 11 * 1.05 = 11.55 ‚Üí 11
- MaxStamina = 800 + (12-10)*80 = 960
- MaxMana = 400
- Crit = 5%

–£—Ä–æ–Ω –∑–∞ —É–¥–∞—Ä:
- baseDamage = 18 * (1 + 10*0.08) = 32.4
- –° –≤–∞—Ä–∏–∞—Ü–∏–µ–π: 26-39
- –ü–æ—Å–ª–µ –∫—Ä–∏—Ç–∞: 52-78
```
